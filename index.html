<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tarot42 Scanner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
/* ─────────────────────────────────────────────────────────────
   Clarifier Animations Pack
   ───────────────────────────────────────────────────────────── */

body::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:url('/static/background.jpg.png');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  filter:brightness(1.12) saturate(1.10) contrast(1.02);
  opacity:0.38;
  z-index:-2;
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  background:radial-gradient(circle at 50% 30%, rgba(0,0,0,0.06), rgba(0,0,0,0.45));
  z-index:-1;
}

.glass-panel{
  background: rgba(9, 9, 11, 0.46);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);
}

.glass-card{
  background: rgba(9, 9, 11, 0.56);
  border: 1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(16px);
  position: relative;
}

.glass-card::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(135deg, rgba(99,102,241,0.08) 0%, rgba(168,85,247,0.04) 50%, rgba(56,189,248,0.02) 100%);
  border-radius:inherit;
  opacity:0;
  transition:opacity 0.3s ease;
  pointer-events:none;
}

.glass-card:hover::before{
  opacity:1;
}

.glass-card::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.08) 0%, transparent 70%);
  opacity:0;
  transition:opacity 0.3s ease;
  pointer-events:none;
}

.glass-card:hover::after{
  opacity:1;
}

/* Enhanced card animations */
@keyframes cardEntry {
  0% { 
    opacity: 0; 
    transform: translateY(20px) scale(0.9); 
  }
  100% { 
    opacity: 1; 
    transform: translateY(0) scale(1); 
  }
}

.glass-card {
  animation: cardEntry 0.4s ease-out;
}

/* Glow effects for different card states */
.glass-card[data-slot-index] {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 20px 40px rgba(0,0,0,0.4),
    0 0 0 1px rgba(99,102,241,0.2),
    inset 0 1px 0 rgba(255,255,255,0.1);
}

/* Pulse animation for newly added cards */
@keyframes cardPulse {
  0%, 100% { 
    box-shadow: 
      0 0 0 0 rgba(99,102,241,0.4),
      0 10px 30px rgba(0,0,0,0.3);
  }
  50% { 
    box-shadow: 
      0 0 0 8px rgba(99,102,241,0.1),
      0 15px 35px rgba(0,0,0,0.4);
  }
}

.glass-card.newly-added {
  animation: cardPulse 1.5s ease-in-out;
}

/* Enhanced empty slot styling */
.glass-soft{
  background: rgba(9, 9, 11, 0.34);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(8px);
}

/* Enhanced reading panel styles */
#readingPanel {
  animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

#readingPanel h3 {
  color: #f4f4f5;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

#readingPanel h4 {
  color: #e4e4e7;
  text-shadow: 0 1px 1px rgba(0,0,0,0.2);
}

#readingSummary {
  color: #d4d4d8;
  line-height: 1.6;
  text-shadow: 0 1px 1px rgba(0,0,0,0.1);
}

.glass-panel {
  background: rgba(9, 9, 11, 0.56);
  border: 1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(16px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

/* Scrollbar styling for reading notes */
#readingNotes ::-webkit-scrollbar {
  width: 6px;
}

#readingNotes ::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 3px;
}

#readingNotes ::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.2);
  border-radius: 3px;
}

#readingNotes ::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.3);
}

/* Chat Panel */
.chat-panel {
  position: fixed;
  z-index: 50;
  background: rgba(9, 9, 11, 0.9);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.1);
  display: flex;
  flex-direction: column;
}

/* Mobile: bottom sheet */
@media (max-width: 1023px) {
  .chat-panel {
    bottom: 0;
    left: 0;
    right: 0;
    height: 0;
    transition: height 0.3s ease;
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  .chat-panel.collapsed {
    height: 60px;
  }
  .chat-panel.half {
    height: 35vh;
  }
  .chat-panel.expanded {
    height: 60vh;
  }
}

/* Desktop: right drawer */
@media (min-width: 1024px) {
  .chat-panel {
    top: 0;
    right: 0;
    width: 400px;
    height: 100%;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    border-left: 1px solid rgba(255,255,255,0.1);
  }
  .chat-panel.open {
    transform: translateX(0);
  }
  .chat-panel.collapsed,
  .chat-panel.half,
  .chat-panel.expanded {
    transform: translateX(0);
  }
}

.chat-content {
  display: flex;
  flex-direction: column;
  height: 100%;
}

#chatMessages {
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.2) rgba(255,255,255,0.05);
}

#chatMessages::-webkit-scrollbar {
  width: 6px;
}

#chatMessages::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
  border-radius: 3px;
}

#chatMessages::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.2);
  border-radius: 3px;
}

#chatMessages::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.3);
}

/* Hide camera section in digital mode */
#cameraSection.hidden {
  display: none !important;
}

button, .btn {
  transition: transform 120ms ease, filter 120ms ease, opacity 120ms ease;
}
button:active, .btn:active {
  transform: translateY(1px) scale(0.99);
  filter: brightness(1.05);
}

.card--clarify-target {
  position: relative;
  outline: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 0 0 0 var(--clarify-glow);
  animation: clarifyPulse 1.35s ease-in-out infinite;
  transform-origin: center;
}

@keyframes clarifyPulse {
  0%   { box-shadow: 0 0 0 0 rgba(99,102,241,0.00), 0 8px 30px rgba(0,0,0,0.35); }
  45%  { box-shadow: 0 0 0 10px rgba(99,102,241,0.14), 0 10px 34px rgba(0,0,0,0.42); }
  100% { box-shadow: 0 0 0 0 rgba(99,102,241,0.00), 0 8px 30px rgba(0,0,0,0.35); }
}

.clarify-overlay {
  position: fixed;
  inset: 0;
  z-index: 70;
  display: none;
  background: radial-gradient(circle at 50% 40%, rgba(0,0,0,0.25), rgba(0,0,0,0.75));
  backdrop-filter: blur(2px);
}
.clarify-overlay.on {
  display: grid;
  place-items: center;
  animation: overlayFadeIn 180ms ease-out both;
}
@keyframes overlayFadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.clarify-frame {
  width: min(82vw, 420px);
  aspect-ratio: 3 / 4;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,0.22);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.06) inset, 0 0 24px rgba(99,102,241,0.25), 0 0 80px rgba(0,0,0,0.65);
  position: relative;
  overflow: hidden;
}
.clarify-frame::before {
  content: "";
  position: absolute;
  inset: -30%;
  background: radial-gradient(circle at 30% 30%, var(--clarify-glow), transparent 48%), radial-gradient(circle at 65% 40%, var(--clarify-glow-2), transparent 55%);
  filter: blur(18px);
  opacity: 0.75;
  animation: frameDrift 3.4s ease-in-out infinite;
}
@keyframes frameDrift {
  0%,100% { transform: translate3d(-2%, -2%, 0); }
  50%     { transform: translate3d( 2%,  2%, 0); }
}
.clarify-frame .clarify-text {
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 14px;
  font-size: 13px;
  line-height: 1.25;
  color: rgba(255,255,255,0.88);
  background: rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  padding: 10px 12px;
}

.clarifier-card {
  transform: translateY(10px);
  opacity: 0;
}
.clarifier-card.enter {
  animation: clarifierEnter 280ms cubic-bezier(.2,.9,.2,1) both;
}
@keyframes clarifierEnter {
  from { opacity: 0; transform: translateY(14px) scale(0.985); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.clarifier-connector {
  height: 14px;
  margin: 6px 0 2px;
  position: relative;
}
.clarifier-connector::before {
  content: "";
  position: absolute;
  left: 14px;
  top: 50%;
  width: 0%;
  height: 1px;
  background: linear-gradient(90deg, rgba(99,102,241,0.0), rgba(99,102,241,0.75), rgba(56,189,248,0.55));
  transform: translateY(-50%);
  animation: lineDraw 260ms ease-out both;
}
@keyframes lineDraw {
  from { width: 0%; opacity: 0.0; }
  to   { width: 78%; opacity: 1.0; }
}

@media (prefers-reduced-motion: reduce) {
  .card--clarify-target, .clarifier-card.enter, .clarify-overlay.on, .clarify-frame::before, .clarifier-connector::before {
    animation: none !important;
  }
}
  </style>
</head>
<body class="bg-zinc-950 text-zinc-100 min-h-screen">
  <div class="max-w-6xl mx-auto px-4 py-6">
    <header class="flex flex-col gap-4">
      <div class="flex items-center justify-between gap-4">
        <div>
          <h1 class="text-2xl font-semibold tracking-tight">Tarot42</h1>
          <p class="text-sm text-zinc-400">Sigil scanner • spread board • reading • chat</p>
        </div>
        <div class="flex items-center gap-2">
          <select id="readerStyle" class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm">
            <option value="seer">Style: Seer</option>
            <option value="counselor">Style: Counselor</option>
            <option value="strategist">Style: Strategist</option>
            <option value="shadow">Style: Shadow</option>
          </select>
          <div class="flex gap-2 items-center">
            <select id="modeSelect" class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm">
              <option value="physical">Physical (Scan)</option>
              <option value="digital">Digital (Auto Shuffle)</option>
            </select>
            <select id="overlaySelect" class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm">
              <option value="WIND">Overlay: Wind</option>
            </select>
            <select id="spreadSelect" class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm">
              <option value="one_card">1-card</option>
              <option value="three_card">3-card</option>
              <option value="celtic_cross">Celtic Cross</option>
            </select>
          </div>
          <button id="btnNew" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-4 py-2 text-sm font-medium">New Reading</button>
        </div>
      </div>
      <!-- Step Rail -->
      <div id="stepRail" class="flex items-center gap-4 text-sm text-zinc-400">
        <div id="stepMode" class="flex items-center gap-2">
          <div class="w-2 h-2 rounded-full bg-zinc-600"></div>
          <span>Mode</span>
        </div>
        <div class="text-zinc-600">→</div>
        <div id="stepAcquire" class="flex items-center gap-2">
          <div class="w-2 h-2 rounded-full bg-zinc-600"></div>
          <span>Acquire</span>
        </div>
        <div class="text-zinc-600">→</div>
        <div id="stepReading" class="flex items-center gap-2">
          <div class="w-2 h-2 rounded-full bg-zinc-600"></div>
          <span>Reading</span>
        </div>
        <div class="text-zinc-600">→</div>
        <div id="stepChat" class="flex items-center gap-2">
          <div class="w-2 h-2 rounded-full bg-zinc-600"></div>
          <span>Chat</span>
        </div>
      </div>
    </header>

    <div id="overlayInfo" class="mt-3 text-xs text-zinc-400"></div>

    <main class="grid grid-cols-1 lg:grid-cols-2 gap-4 mt-6">
      <!-- Camera -->
      <section id="cameraSection" class="glass-panel rounded-2xl p-4">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-semibold">Camera</h2>
          <div class="flex items-center gap-2">
            <label class="text-xs text-zinc-400 flex items-center gap-2">
              <input id="reversedToggle" type="checkbox" class="accent-indigo-500"/>
              reversed
            </label>
            <button id="btnStart" class="bg-zinc-800 hover:bg-zinc-700 rounded-xl px-4 py-2 text-sm font-medium transition-all duration-200 hover:scale-105 shadow-md hover:shadow-lg">
  <span class="flex items-center gap-2">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
    </svg>
    <span id="btnStartText">Start</span>
  </span>
</button>
            <button id="btnScan" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 rounded-xl px-4 py-2 text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
  <span class="flex items-center gap-2">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
    </svg>
    Scan
  </span>
</button>
          </div>
        </div>

        <div class="mt-3 aspect-video bg-black rounded-xl overflow-hidden border border-zinc-800 relative">
          <video id="video" autoplay playsinline class="w-full h-full object-cover"></video>
          <div class="absolute inset-0 pointer-events-none flex items-center justify-center">
            <div class="w-3/5 h-3/5 border-2 border-indigo-400/70 rounded-xl relative">
              <div class="absolute inset-0 border border-white/20 rounded-xl animate-pulse"></div>
              <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs text-zinc-400 whitespace-nowrap">
                Align card here
              </div>
            </div>
          </div>
          <div class="absolute bottom-2 left-2 text-xs text-zinc-500 bg-black/50 px-2 py-1 rounded">
            <span id="cameraStatus">Camera off</span>
          </div>
        </div>

        <div class="mt-3 flex items-start justify-between gap-3">
          <div class="text-sm">
            <div class="text-zinc-400">Last scan</div>
            <div id="lastScan" class="font-medium">—</div>
          </div>
          <div class="text-sm text-right">
            <div class="text-zinc-400">Status</div>
            <div id="status" class="font-medium">Idle</div>
          </div>
        </div>

        <p class="mt-3 text-xs text-zinc-400">
          Tip: keep the sigil centered, flat, and well-lit. Black-on-light works best.
        </p>

        <canvas id="canvas" class="hidden"></canvas>
      </section>

      <!-- Spread Board -->
      <section class="glass-panel rounded-2xl p-4">
        <div class="flex items-center justify-between gap-3">
          <h2 class="text-lg font-semibold">Spread Board</h2>
          <div class="flex items-center gap-2">
            <button id="btnUndo" class="bg-zinc-800 hover:bg-zinc-700 rounded-lg px-3 py-2 text-sm" disabled>Undo</button>
            <button id="btnReading" class="bg-emerald-600 hover:bg-emerald-500 rounded-lg px-3 py-2 text-sm font-medium" disabled>Generate Reading</button>
          </div>
        </div>

        <div id="board" class="mt-4"></div>

        <div id="digitalWidget" class="mt-4 glass-panel rounded-xl p-4 hidden">
          <div class="flex items-center gap-2 justify-center">
            <button id="btnShuffle" class="bg-zinc-800 hover:bg-zinc-700 rounded-lg px-3 py-2 text-sm">Shuffle</button>
            <button id="btnDraw1" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-3 py-2 text-sm">Draw 1</button>
            <button id="btnDraw3" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-3 py-2 text-sm">Draw 3</button>
            <button id="btnDraw7" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-3 py-2 text-sm">Draw 7</button>
            <label class="text-xs text-zinc-400 flex items-center gap-2">
              <input id="digitalReversedToggle" type="checkbox" class="accent-indigo-500" checked/>
              Allow reversed
            </label>
          </div>
        </div>
          <div class="border-t border-zinc-800 pt-4">
            <div class="flex items-center justify-between gap-3">
              <h3 class="text-lg font-semibold text-zinc-100">Reading</h3>
              <div class="flex items-center gap-2">
                <select id="voiceSelect" class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm">
                  <option value="nova">Nova</option>
                </select>
                <button id="speakBtn" class="bg-purple-600 hover:bg-purple-500 rounded-lg px-3 py-2 text-sm font-medium">Speak Reading</button>
              </div>
            </div>
            
            <!-- Reading Summary -->
            <div class="glass-panel rounded-xl p-4 mt-4">
              <h4 class="text-base font-semibold text-zinc-200 mb-3">Summary</h4>
              <p id="readingSummary" class="text-sm text-zinc-100 leading-relaxed"></p>
            </div>

            <!-- Card Notes -->
            <div class="mt-4">
              <h4 class="text-base font-semibold text-zinc-200 mb-3">Card Interpretations</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="readingNotes"></div>
            </div>

            <!-- Additional Insights -->
            <div id="readingInsights" class="mt-4 glass-panel rounded-xl p-4" style="display: none;">
              <h4 class="text-base font-semibold text-zinc-200 mb-3">Deeper Insights</h4>
              <div id="insightsContent" class="space-y-2"></div>
            </div>

            <div class="mt-4 flex items-center gap-2">
              <input id="chatInput" class="flex-1 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-2 text-sm" placeholder="Ask about this reading..."/>
              <button id="btnMic" class="bg-zinc-800 hover:bg-zinc-700 rounded-lg px-3 py-2 text-sm font-medium" title="Record voice message">Mic</button>
              <button id="btnChat" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-3 py-2 text-sm font-medium">Send</button>
            </div>
            <div class="mt-2 flex items-center justify-between gap-3">
              <div class="flex items-center gap-2">
                <div id="micStatus" class="text-xs text-zinc-400">Idle</div>
                <div id="micTimer" class="text-xs text-zinc-500"></div>
              </div>
              <label class="text-xs text-zinc-400 flex items-center gap-2 select-none">
                <input id="autoSendToggle" type="checkbox" class="accent-indigo-500"/>
                auto-send
              </label>
            </div>
            <div class="mt-2 flex items-center justify-between gap-3">
              <label class="text-xs text-zinc-400 flex items-center gap-2">
                <input id="autoSpeakChat" type="checkbox" class="accent-indigo-500" checked/>
                Auto-speak chat replies
              </label>
              <div class="text-xs text-zinc-500">
                <span id="chatStatus">Ready</span>
              </div>
            </div>
            <div id="chatLog" class="mt-3 space-y-2"></div>
          </div>
        </div>
      </section>
    </main>

    <!-- Chat Panel -->
    <div id="chatPanel" class="chat-panel">
      <div class="chat-header flex items-center justify-between p-4 bg-zinc-900/80 border-b border-zinc-700">
        <div class="flex items-center gap-2">
          <button id="btnChatCollapse" class="text-zinc-400 hover:text-zinc-200">−</button>
          <button id="btnChatHalf" class="text-zinc-400 hover:text-zinc-200">□</button>
          <button id="btnChatExpand" class="text-zinc-400 hover:text-zinc-200">⬜</button>
        </div>
        <div class="text-sm font-medium">Chat</div>
        <div class="flex items-center gap-2">
          <button id="btnSummarize" class="bg-zinc-800 hover:bg-zinc-700 rounded px-2 py-1 text-xs">Summarize</button>
          <button id="btnClearChat" class="bg-zinc-800 hover:bg-zinc-700 rounded px-2 py-1 text-xs">Clear</button>
        </div>
      </div>
      <div class="chat-content flex-1 overflow-hidden flex flex-col">
        <div id="readingSummaryChip" class="p-3 bg-indigo-950/40 border-b border-zinc-700 text-sm text-zinc-200 hidden"></div>
        <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-2"></div>
        <div class="chat-input-area p-4 border-t border-zinc-700 bg-zinc-900/50">
          <div class="flex items-center gap-2">
            <input id="chatInput" class="flex-1 bg-zinc-950 border border-zinc-800 rounded-lg px-3 py-2 text-sm" placeholder="Ask about this reading..."/>
            <button id="btnMic" class="bg-zinc-800 hover:bg-zinc-700 rounded-lg px-3 py-2 text-sm font-medium" title="Record voice message">Mic</button>
            <button id="btnChat" class="bg-indigo-600 hover:bg-indigo-500 rounded-lg px-3 py-2 text-sm font-medium">Send</button>
          </div>
          <div class="mt-2 flex items-center justify-between gap-3">
            <div class="flex items-center gap-2">
              <div id="micStatus" class="text-xs text-zinc-400">Idle</div>
              <div id="micTimer" class="text-xs text-zinc-500"></div>
            </div>
            <label class="text-xs text-zinc-400 flex items-center gap-2 select-none">
              <input id="autoSendToggle" type="checkbox" class="accent-indigo-500"/>
              auto-send
            </label>
          </div>
          <div class="mt-2 flex items-center justify-between gap-3">
            <label class="text-xs text-zinc-400 flex items-center gap-2">
              <input id="autoSpeakChat" type="checkbox" class="accent-indigo-500" checked/>
              Auto-speak chat replies
            </label>
            <div class="text-xs text-zinc-500">
              <span id="chatStatus">Ready</span>
            </div>
          </div>
        </div>
      </div>
      <button id="jumpToLatest" class="jump-to-latest fixed bottom-20 right-4 bg-indigo-600 hover:bg-indigo-500 rounded-full p-3 shadow-lg hidden">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
      </button>
    </div>

    <div id="clarifyOverlay" class="clarify-overlay" aria-hidden="true">
      <div class="clarify-frame">
        <div class="clarify-text">
          <strong>Clarifier Mode</strong><br/>
          Hold clarifier card steady in view, then press <em>Scan</em>.
        </div>
      </div>
    </div>

    <footer class="mt-8 text-xs text-zinc-500">
      Runs locally. Backend: FastAPI on <span class="text-zinc-300">:8789</span>. Frontend served by backend.
    </footer>
  </div>

  <script src="/app.js"></script>
</body>
</html>
